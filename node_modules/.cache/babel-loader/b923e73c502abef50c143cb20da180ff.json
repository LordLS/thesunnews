{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'antd/dist/antd.css';import React,{useEffect,useState}from'react';import{Header,Item,Icon,Button,Placeholder,Transition}from'semantic-ui-react';import Message from'../components/Message';import{useParams,NavLink}from'react-router-dom';import{api}from'../helpers/api';import ReactMarkdown from'react-markdown';import{history}from'../helpers/history';import DeleteModal from'../components/DeleteModal';import{authAxios,authenticationService}from'../services';import axios from'axios';var PubDetail=function PubDetail(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),publication=_useState2[0],setPub=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var params=useParams();function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var ax,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;ax=axios;if(authenticationService.isAuthenticated){ax=authAxios;}_context.next=5;return ax.get(\"\".concat(api.pub.list).concat(params['pubid'],\"/\"));case 5:res=_context.sent;setPub(res.data);setLoading(false);_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);setLoading(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _fetchData.apply(this,arguments);}useEffect(function(){fetchData();},[]);// for more readability\nvar get_date=function get_date(){var d=new Date(publication.date_time_posted);var months=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];return\"\".concat(d.getDate(),\" \").concat(months[d.getMonth()],\" \").concat(d.getFullYear());};function handleDeleteButton(){authAxios.delete(\"\".concat(api.pub.list).concat(params['pubid'],\"/\")).then(function(res){history.push('/');}).catch(function(err){console.log(err);setError(err.message);});}return/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'left'}},loading&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Item,null,/*#__PURE__*/React.createElement(Placeholder,null,/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"}),/*#__PURE__*/React.createElement(Item.Extra,null,\" \",/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"short\"})),/*#__PURE__*/React.createElement(Item.Extra,null,\" \",/*#__PURE__*/React.createElement(Placeholder.Line,null),\" \"),/*#__PURE__*/React.createElement(Placeholder.Image,{rectangular:true}),/*#__PURE__*/React.createElement(Item.Content,null,/*#__PURE__*/React.createElement(Item.Description,null,/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"}),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"}),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"}),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"}),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"}),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"}),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"}),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"})))))),publication&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Item,null,/*#__PURE__*/React.createElement(Header,{size:\"huge\"},publication.title),/*#__PURE__*/React.createElement(Item.Extra,null,/*#__PURE__*/React.createElement(Icon,{name:\"calendar outline\"}),get_date(),\"  \"),/*#__PURE__*/React.createElement(Item.Extra,null,\"Writer(s): \",publication.writer.map(function(x){return\"\".concat(x,\"   \");}),\" \"),/*#__PURE__*/React.createElement(Item.Image,{size:\"large\",src:publication.thumbnail}),/*#__PURE__*/React.createElement(Item.Content,null,/*#__PURE__*/React.createElement(Item.Description,null,/*#__PURE__*/React.createElement(ReactMarkdown,{source:publication.content}))))),publication.is_author&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLink,{to:\"/\".concat(params['pubsection'],\"/\").concat(params['pubid'],\"/update\")},/*#__PURE__*/React.createElement(Button,null,\"Update \")),/*#__PURE__*/React.createElement(DeleteModal,{func:handleDeleteButton}))),error&&/*#__PURE__*/React.createElement(Message,{negative:true,message:error}));};export default PubDetail;","map":{"version":3,"sources":["/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/src/containers/PubDetails.js"],"names":["React","useEffect","useState","Header","Item","Icon","Button","Placeholder","Transition","Message","useParams","NavLink","api","ReactMarkdown","history","DeleteModal","authAxios","authenticationService","axios","PubDetail","publication","setPub","error","setError","loading","setLoading","params","fetchData","ax","isAuthenticated","get","pub","list","res","data","message","get_date","d","Date","date_time_posted","months","getDate","getMonth","getFullYear","handleDeleteButton","delete","then","push","catch","err","console","log","textAlign","title","writer","map","x","thumbnail","content","is_author"],"mappings":"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","sourcesContent":["import 'antd/dist/antd.css'\nimport React, {useEffect, useState} from 'react';\nimport {Header,Item, Icon, Button, Placeholder, Transition} from 'semantic-ui-react'\nimport Message from '../components/Message'\nimport {useParams, NavLink} from 'react-router-dom'\nimport {api} from '../helpers/api'\nimport ReactMarkdown from 'react-markdown'\nimport {history} from '../helpers/history'\nimport DeleteModal from '../components/DeleteModal'\nimport {authAxios, authenticationService} from '../services'\nimport axios from 'axios'\n\nconst PubDetail = () => {\n  const [publication, setPub] = useState()\n  const [error, setError] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const params = useParams()\n  \n  async function fetchData() {\n    try {\n      let ax = axios\n      if(authenticationService.isAuthenticated){\n          ax = authAxios\n        }\n        const res = await ax.get(`${api.pub.list}${params['pubid']}/`);\n        setPub(res.data);\n        setLoading(false)\n    } catch (err) {\n        setError(err.message)\n        setLoading(false)\n    } \n  }\n\n  useEffect(() => {\n    fetchData();\n  }, [])\n\n  // for more readability\n  const get_date = () => {\n    let d = new Date(publication.date_time_posted)\n    let months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    return (\n      `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`\n    )\n  }\n\n  function handleDeleteButton() {\n   authAxios.delete(`${api.pub.list}${params['pubid']}/`).then(res => {\n            history.push('/')\n        }).catch(err => {\n            console.log(err)\n            setError(err.message)\n        })  \n  }\n\n  return(\n      <div style={{textAlign: 'left'}}>\n      {loading &&\n      <>\n        <Item>\n          <Placeholder>\n        <Placeholder.Line length='full' />\n        <Item.Extra> <Placeholder.Line length='short' /></Item.Extra>\n                <Item.Extra> <Placeholder.Line /> </Item.Extra>\n            <Placeholder.Image rectangular/>\n            <Item.Content>\n            <Item.Description>\n            <Placeholder.Line length='full' />\n            <Placeholder.Line length='full' />\n            <Placeholder.Line length='full' />\n            <Placeholder.Line length='full' />\n            <Placeholder.Line length='full' />\n            <Placeholder.Line length='full' />\n            <Placeholder.Line length='full' />\n            <Placeholder.Line length='full' />\n              </Item.Description>\n            </Item.Content>\n            </Placeholder>\n        </Item>\n        </>\n      }\n\n\n  \n      {publication && (\n        <div>\n        <div>\n          <Item >\n          <Header size='huge'>{publication.title}</Header>\n          <Item.Extra><Icon name='calendar outline'/>{get_date()}  </Item.Extra>\n                  <Item.Extra>Writer(s): {publication.writer.map(x => {\n                    return (\n                      `${x}   `\n                    )\n                  })} </Item.Extra>\n          <Item.Image size=\"large\" src={publication.thumbnail} />\n              <Item.Content>\n              <Item.Description>\n              <ReactMarkdown source={publication.content}/>\n                </Item.Description>\n                  \n              </Item.Content>\n          </Item>\n        </div>\n        {publication.is_author &&\n          <>\n            <NavLink to={`/${params['pubsection']}/${params['pubid']}/update`}><Button>Update </Button></NavLink>\n            <DeleteModal func={handleDeleteButton}/>\n          </>\n        }\n      </div>       \n      )\n      }\n\n      \n      {error && <Message negative message={error}/>}\n      </div>\n  )\n}\nexport default PubDetail;"]},"metadata":{},"sourceType":"module"}