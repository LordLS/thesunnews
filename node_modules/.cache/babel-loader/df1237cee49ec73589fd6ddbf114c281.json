{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Container,Menu,Icon,Dropdown,Message}from'semantic-ui-react';import{authAxios,authenticationService}from'../services';import{NavLink}from'react-router-dom';import{api}from'../helpers/api';import{ProfileMenu}from'../components/DropdownMenu';import{useMediaQuery}from'react-responsive';var Navbar=function Navbar(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var loginOut=function loginOut(){authenticationService.logout();window.location.reload(false);};var isTabletOrMobile=useMediaQuery({query:'(max-width: 1000px)'});function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!authenticationService.isAuthenticated){_context.next=11;break;}_context.prev=1;_context.next=4;return authAxios.get(api.auth.profile);case 4:res=_context.sent;setUser(res.data.results[0]);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return _fetchData.apply(this,arguments);}useEffect(function(){if(authenticationService.isAuthenticated){fetchData();}},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Menu,{fixed:\"top\",inverted:true},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Menu.Item,{as:NavLink,to:\"/\",header:true},\"The Sun News\"),isTabletOrMobile?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Dropdown,{icon:\"bars\",pointing:true,className:\"link item\"},/*#__PURE__*/React.createElement(Dropdown.Menu,null,/*#__PURE__*/React.createElement(Dropdown.Item,{as:NavLink,to:\"/Sport\"},\"Sport\"),/*#__PURE__*/React.createElement(Dropdown.Item,{as:NavLink,to:\"/World\"},\"World\"),/*#__PURE__*/React.createElement(Dropdown.Item,{as:NavLink,to:\"/Business\"},\"Business\"),/*#__PURE__*/React.createElement(Dropdown.Item,{as:NavLink,to:\"/Health\"},\"Health\"),/*#__PURE__*/React.createElement(Dropdown.Item,{as:NavLink,to:\"/Politic\"},\"Politic\")))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Menu.Item,{as:NavLink,to:\"/Sport\"},\"Sport\"),/*#__PURE__*/React.createElement(Menu.Item,{as:NavLink,to:\"/World\"},\"World\"),/*#__PURE__*/React.createElement(Menu.Item,{as:NavLink,to:\"/Business\"},\"Business\")),/*#__PURE__*/React.createElement(Menu.Menu,{position:\"right\"},authenticationService.isAuthenticated?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Menu.Item,{as:NavLink,to:\"/feed\"},\"Feed\"),/*#__PURE__*/React.createElement(Dropdown,{text:\" Profile \",icon:\"user outline\",pointing:true,className:\"link item\"},/*#__PURE__*/React.createElement(Dropdown.Menu,null,/*#__PURE__*/React.createElement(Dropdown.Item,{as:NavLink,to:\"/userprofile\"},\"My Profile\"),/*#__PURE__*/React.createElement(Dropdown.Item,{onClick:loginOut,as:\"a\"},\"Log out\"),/*#__PURE__*/React.createElement(Dropdown.Divider,null),/*#__PURE__*/React.createElement(Dropdown.Header,null,\"Options\"),user.is_writer&&ProfileMenu.writer))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLink,{to:\"/login/\"},/*#__PURE__*/React.createElement(Menu.Item,{as:\"li\"},/*#__PURE__*/React.createElement(Icon,{name:\"user outline\"}),\" Login \")))))),error&&/*#__PURE__*/React.createElement(Message,{negative:true,message:error.message}));};export default Navbar;","map":{"version":3,"sources":["/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/src/components/Navbar.js"],"names":["React","useEffect","useState","Container","Menu","Icon","Dropdown","Message","authAxios","authenticationService","NavLink","api","ProfileMenu","useMediaQuery","Navbar","user","setUser","error","setError","loginOut","logout","window","location","reload","isTabletOrMobile","query","fetchData","isAuthenticated","get","auth","profile","res","data","results","message","is_writer","writer"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {\n    Container,\n    Menu,\n    Icon,\n    Dropdown,\n    Message\n  } from 'semantic-ui-react';\nimport {authAxios, authenticationService} from '../services'\nimport {NavLink} from 'react-router-dom';\nimport {api} from '../helpers/api'\nimport {ProfileMenu} from '../components/DropdownMenu'\nimport { useMediaQuery } from 'react-responsive'\n\n\nconst Navbar = () => {\n    const [user, setUser] = useState('')\n    const [error, setError] = useState(null)\n    const loginOut = () => {\n        authenticationService.logout()\n        window.location.reload(false)\n    }\n    const isTabletOrMobile = useMediaQuery({ query: '(max-width: 1000px)' })\n    \n    async function fetchData() {\n      if(authenticationService.isAuthenticated){\n      try {\n          const res = await authAxios.get(api.auth.profile);\n          setUser(res.data.results[0]);\n      } catch (err) {\n          setError(err.message)\n      } }\n    }\n\n    useEffect(() => {\n      if (authenticationService.isAuthenticated) {\n        fetchData();\n      }\n    }, [])\n\n\n\n    return (\n    <div>\n        <Menu fixed='top' inverted>\n        <Container>\n            <Menu.Item as={NavLink} to='/' header>\n            The Sun News\n            </Menu.Item>\n            {isTabletOrMobile ? \n            <> \n                <Dropdown icon='bars' pointing className='link item'>\n                  <Dropdown.Menu>\n                    <Dropdown.Item as={NavLink} to='/Sport'>Sport</Dropdown.Item>\n                    <Dropdown.Item as={NavLink} to='/World'>World</Dropdown.Item>\n                    <Dropdown.Item as={NavLink} to='/Business'>Business</Dropdown.Item>\n                    <Dropdown.Item as={NavLink} to='/Health'>Health</Dropdown.Item>\n                    <Dropdown.Item as={NavLink} to='/Politic'>Politic</Dropdown.Item>\n                  </Dropdown.Menu>\n                  </Dropdown>\n            \n            </>\n            \n            :\n            <>\n            <Menu.Item as={NavLink} to='/Sport'>Sport</Menu.Item>\n            <Menu.Item as={NavLink} to='/World'>World</Menu.Item>\n            <Menu.Item as={NavLink} to='/Business'>Business</Menu.Item>\n            </> }\n            \n\n            <Menu.Menu position='right'>\n            {authenticationService.isAuthenticated ?\n            <>\n            \n              <Menu.Item as={NavLink} to='/feed'>Feed</Menu.Item>\n                <Dropdown text=' Profile ' icon='user outline' pointing className='link item'>\n                  <Dropdown.Menu>\n                    <Dropdown.Item as={NavLink} to='/userprofile' >My Profile</Dropdown.Item>\n                    <Dropdown.Item onClick={loginOut} as='a'>Log out</Dropdown.Item>\n                    <Dropdown.Divider />\n                    <Dropdown.Header>Options</Dropdown.Header>\n                    {user.is_writer && ProfileMenu.writer}\n                  </Dropdown.Menu>\n                  </Dropdown>\n                  \n            </>\n            :\n            <>\n            <NavLink to='/login/'><Menu.Item as='li'><Icon name='user outline'/> Login </Menu.Item></NavLink>\n            </>\n            }\n            </Menu.Menu>      \n        </Container>\n        </Menu>\n        {error && <Message negative message={error.message}/>}\n    </div>\n)}\n\nexport default Navbar;"]},"metadata":{},"sourceType":"module"}