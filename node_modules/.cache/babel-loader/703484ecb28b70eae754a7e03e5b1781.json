{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Header,Message,Placeholder,Divider}from'semantic-ui-react';import{authenticationService,authAxios}from'../services';import{Redirect}from'react-router-dom';import{api}from'../helpers/api';import ListPub from'../components/ListPub';var PubFeed=function PubFeed(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),publication=_useState2[0],setPub=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return authAxios.get(\"\".concat(api.pub.base,\"feed/\"));case 4:res=_context.sent;if(res.data.results.length!==0){setPub(res.data.results);}setLoading(false);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);setLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _fetchData.apply(this,arguments);}useEffect(function(){if(authenticationService.isAuthenticated){fetchData();}},[]);if(authenticationService.isAuthenticated===false){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{as:\"h1\"},\" Feed \"),publication?/*#__PURE__*/React.createElement(ListPub,{publications:publication}):loading?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Placeholder,{style:{height:150,width:150}},/*#__PURE__*/React.createElement(Placeholder.Image,null),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"})),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Placeholder,{style:{height:150,width:150}},/*#__PURE__*/React.createElement(Placeholder.Image,null),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"})),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Placeholder,{style:{height:150,width:150}},/*#__PURE__*/React.createElement(Placeholder.Image,null),/*#__PURE__*/React.createElement(Placeholder.Line,{length:\"full\"})),/*#__PURE__*/React.createElement(Divider,null)):/*#__PURE__*/React.createElement(Message,null,\"Subscribe to your favorite columns to show their publications on your feed. \"),error&&/*#__PURE__*/React.createElement(Message,{negative:true},\" \",error,\" \"));};export default PubFeed;","map":{"version":3,"sources":["/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/src/containers/PubFeed.js"],"names":["React","useEffect","useState","Header","Message","Placeholder","Divider","authenticationService","authAxios","Redirect","api","ListPub","PubFeed","publication","setPub","loading","setLoading","error","setError","fetchData","get","pub","base","res","data","results","length","message","isAuthenticated","height","width"],"mappings":"8lBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,MAAR,CAAgBC,OAAhB,CAAyBC,WAAzB,CAAsCC,OAAtC,KAAoD,mBAApD,CACA,OAAQC,qBAAR,CAA+BC,SAA/B,KAA+C,aAA/C,CAEA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAAQC,GAAR,KAAkB,gBAAlB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CAGA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,eACUV,QAAQ,EADlB,wCACbW,WADa,eACAC,MADA,8BAEUZ,QAAQ,CAAC,KAAD,CAFlB,yCAEba,OAFa,eAEJC,UAFI,8BAGMd,QAAQ,CAAC,IAAD,CAHd,yCAGbe,KAHa,eAGNC,QAHM,uBAKLC,CAAAA,SALK,qIAKpB,2IACEH,UAAU,CAAC,IAAD,CAAV,CADF,sCAGwBR,CAAAA,SAAS,CAACY,GAAV,WAAiBV,GAAG,CAACW,GAAJ,CAAQC,IAAzB,UAHxB,QAGYC,GAHZ,eAIM,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiBC,MAAjB,GAA4B,CAAhC,CAAmC,CACjCZ,MAAM,CAACS,GAAG,CAACC,IAAJ,CAASC,OAAV,CAAN,CACD,CACDT,UAAU,CAAC,KAAD,CAAV,CAPN,+EASME,QAAQ,CAAC,YAAIS,OAAL,CAAR,CACAX,UAAU,CAAC,KAAD,CAAV,CAVN,oEALoB,4CAmBpBf,SAAS,CAAC,UAAM,CAEZ,GAAGM,qBAAqB,CAACqB,eAAzB,CAAyC,CACvCT,SAAS,GACV,CACF,CALM,CAKJ,EALI,CAAT,CAOA,GAAIZ,qBAAqB,CAACqB,eAAtB,GAA0C,KAA9C,CAAoD,CAClD,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CACD,mBAEE,4CACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,WADF,CAEGf,WAAW,cAAG,oBAAC,OAAD,EAAS,YAAY,CAAEA,WAAvB,EAAH,CACXE,OAAO,cACR,qDACA,oBAAC,WAAD,EAAa,KAAK,CAAE,CAAEc,MAAM,CAAE,GAAV,CAAeC,KAAK,CAAE,GAAtB,CAApB,eACA,oBAAC,WAAD,CAAa,KAAb,MADA,cAEA,oBAAC,WAAD,CAAa,IAAb,EAAkB,MAAM,CAAC,MAAzB,EAFA,CADA,cAKA,oBAAC,OAAD,MALA,cAMA,oBAAC,WAAD,EAAa,KAAK,CAAE,CAAED,MAAM,CAAE,GAAV,CAAeC,KAAK,CAAE,GAAtB,CAApB,eACA,oBAAC,WAAD,CAAa,KAAb,MADA,cAEA,oBAAC,WAAD,CAAa,IAAb,EAAkB,MAAM,CAAC,MAAzB,EAFA,CANA,cAUA,oBAAC,OAAD,MAVA,cAWA,oBAAC,WAAD,EAAa,KAAK,CAAE,CAAED,MAAM,CAAE,GAAV,CAAeC,KAAK,CAAE,GAAtB,CAApB,eACA,oBAAC,WAAD,CAAa,KAAb,MADA,cAEA,oBAAC,WAAD,CAAa,IAAb,EAAkB,MAAM,CAAC,MAAzB,EAFA,CAXA,cAeA,oBAAC,OAAD,MAfA,CADQ,cAmBP,oBAAC,OAAD,qFAtBH,CAwBGb,KAAK,eAAI,oBAAC,OAAD,EAAS,QAAQ,KAAjB,MAAoBA,KAApB,KAxBZ,CAFF,CA6BD,CA1DD,CA2DA,cAAeL,CAAAA,OAAf","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {Header, Message, Placeholder, Divider} from 'semantic-ui-react'\nimport {authenticationService, authAxios} from '../services'\n\nimport { Redirect } from 'react-router-dom'\nimport {api} from '../helpers/api'\n\nimport ListPub from '../components/ListPub'\n\n\nconst PubFeed = () => {\n  const [publication, setPub] = useState()\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(null)\n\n  async function fetchData() {\n    setLoading(true);\n    try {\n        const res = await authAxios.get(`${api.pub.base}feed/`);\n        if (res.data.results.length !== 0) {\n          setPub(res.data.results);\n        }\n        setLoading(false)\n    } catch (err) {\n        setError(err.message)\n        setLoading(false)\n    } \n  }\n\n  useEffect(() => {\n      \n      if(authenticationService.isAuthenticated){\n        fetchData()\n      }\n    }, [])\n  \n  if (authenticationService.isAuthenticated === false){\n    return <Redirect to='/' />\n  }  \n  return(\n    \n    <div>\n      <Header as='h1'> Feed </Header>\n      {publication ? <ListPub publications={publication}/> \n      :loading ? \n      <>\n      <Placeholder style={{ height: 150, width: 150 }}>\n      <Placeholder.Image />\n      <Placeholder.Line length='full' />\n      </Placeholder>\n      <Divider />\n      <Placeholder style={{ height: 150, width: 150 }}>\n      <Placeholder.Image />\n      <Placeholder.Line length='full' />\n      </Placeholder>\n      <Divider />\n      <Placeholder style={{ height: 150, width: 150 }}>\n      <Placeholder.Image />\n      <Placeholder.Line length='full' />\n      </Placeholder>\n      <Divider />\n      </>\n      :\n       <Message>Subscribe to your favorite columns to show their publications on your feed. </Message>}\n      \n      {error && <Message negative> {error} </Message>}\n     </div>\n  )\n}\nexport default PubFeed;"]},"metadata":{},"sourceType":"module"}