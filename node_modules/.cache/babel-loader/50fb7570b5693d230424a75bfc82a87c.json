{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'antd/dist/antd.css';import React,{useEffect,useState}from'react';import{Header,Message}from'semantic-ui-react';import{authenticationService,authAxios}from'../services';import{api}from'../helpers/api';import{Redirect}from'react-router-dom';import ListPub from'../components/ListPub';import Loading from'../components/Loading';var PubSection=function PubSection(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),publication=_useState2[0],setPub=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return authAxios.get(\"\".concat(api.pub.base,\"myPublication/\"));case 4:res=_context.sent;setPub(res.data.results);setLoading(false);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);setLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _fetchData.apply(this,arguments);}useEffect(function(){if(authenticationService.isAuthenticated){fetchData();}},[]);if(authenticationService.isAuthenticated===false){return/*#__PURE__*/React.createElement(Redirect,{to:\"/login\"});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{as:\"h1\"},\"My Publications\"),/*#__PURE__*/React.createElement(Loading,{loading:loading},publication?/*#__PURE__*/React.createElement(ListPub,{publications:publication}):/*#__PURE__*/React.createElement(Message,null,\"You have no publications\")),error&&/*#__PURE__*/React.createElement(Message,{negative:true,message:error}));};export default PubSection;","map":{"version":3,"sources":["/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/src/containers/UserPub.js"],"names":["React","useEffect","useState","Header","Message","authenticationService","authAxios","api","Redirect","ListPub","Loading","PubSection","publication","setPub","loading","setLoading","error","setError","fetchData","get","pub","base","res","data","results","message","isAuthenticated"],"mappings":"8lBAAA,MAAO,oBAAP,CACA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,MAAR,CAAgBC,OAAhB,KAA+B,mBAA/B,CACA,OAAQC,qBAAR,CAA+BC,SAA/B,KAA+C,aAA/C,CACA,OAAQC,GAAR,KAAkB,gBAAlB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CAGA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,eACOT,QAAQ,EADf,wCAChBU,WADgB,eACHC,MADG,8BAEOX,QAAQ,CAAC,IAAD,CAFf,yCAEhBY,OAFgB,eAEPC,UAFO,8BAGGb,QAAQ,CAAC,IAAD,CAHX,yCAGhBc,KAHgB,eAGTC,QAHS,uBAKRC,CAAAA,SALQ,qIAKvB,2IACEH,UAAU,CAAC,IAAD,CAAV,CADF,sCAGwBT,CAAAA,SAAS,CAACa,GAAV,WAAiBZ,GAAG,CAACa,GAAJ,CAAQC,IAAzB,mBAHxB,QAGYC,GAHZ,eAIMT,MAAM,CAACS,GAAG,CAACC,IAAJ,CAASC,OAAV,CAAN,CACAT,UAAU,CAAC,KAAD,CAAV,CALN,+EAOME,QAAQ,CAAC,YAAIQ,OAAL,CAAR,CACAV,UAAU,CAAC,KAAD,CAAV,CARN,oEALuB,4CAiBvBd,SAAS,CAAC,UAAM,CAEZ,GAAII,qBAAqB,CAACqB,eAA1B,CAA0C,CACxCR,SAAS,GACV,CACF,CALM,CAKJ,EALI,CAAT,CAOE,GAAIb,qBAAqB,CAACqB,eAAtB,GAAyC,KAA7C,CAAmD,CAC/C,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAP,CACD,CAEL,mBACE,4CACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,oBADF,cAEE,oBAAC,OAAD,EAAS,OAAO,CAAEZ,OAAlB,EACCF,WAAW,cAAG,oBAAC,OAAD,EAAS,YAAY,CAAEA,WAAvB,EAAH,cAA4C,oBAAC,OAAD,iCADxD,CAFF,CAOGI,KAAK,eAAI,oBAAC,OAAD,EAAS,QAAQ,KAAjB,CAAkB,OAAO,CAAEA,KAA3B,EAPZ,CADF,CAaD,CAzCD,CA0CA,cAAeL,CAAAA,UAAf","sourcesContent":["import 'antd/dist/antd.css'\nimport React, {useEffect, useState} from 'react'\nimport {Header, Message } from 'semantic-ui-react'\nimport {authenticationService, authAxios} from '../services'\nimport {api} from '../helpers/api'\nimport {Redirect} from 'react-router-dom'\nimport ListPub from '../components/ListPub'\nimport Loading from '../components/Loading'\n\n\nconst PubSection = () => {\n  const [publication, setPub] = useState()\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  async function fetchData() {\n    setLoading(true);\n    try {\n        const res = await authAxios.get(`${api.pub.base}myPublication/`);\n        setPub(res.data.results);\n        setLoading(false)\n    } catch (err) {\n        setError(err.message)\n        setLoading(false)\n    } \n  }\n\n  useEffect(() => {\n      \n      if (authenticationService.isAuthenticated){\n        fetchData()\n      }\n    }, [])\n\n    if (authenticationService.isAuthenticated ===false){\n        return <Redirect to='/login'/>\n      }\n  \n  return(\n    <div>\n      <Header as='h1'>My Publications</Header>\n      <Loading loading={loading}>\n      {publication ? <ListPub publications={publication} /> : <Message>You have no publications</Message>}\n      </Loading>\n\n \n      {error && <Message negative message={error}/>}\n      \n      \n     </div>\n  )\n}\nexport default PubSection;"]},"metadata":{},"sourceType":"module"}