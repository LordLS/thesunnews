{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{authAxios}from'../services';import Message from'../components/Message';import UpdatePubForm from'../components/UpdatePubForm';import{api}from'../helpers/api';import{useParams,Redirect}from'react-router-dom';var UpdatePub=function UpdatePub(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),publication=_useState2[0],setPub=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var params=useParams();useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authAxios.get(\"\".concat(api.pub.list).concat(params['pubid'],\"/\"));case 3:res=_context.sent;setPub(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);case 10:console.log();case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);if(publication){if(publication.is_author===false){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}}return/*#__PURE__*/React.createElement(\"div\",null,error&&/*#__PURE__*/React.createElement(Message,{negative:true},\" \",error,\" \"),publication&&/*#__PURE__*/React.createElement(UpdatePubForm,{data:publication}));};export default UpdatePub;","map":{"version":3,"sources":["/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/src/containers/UpdatePub.js"],"names":["React","useEffect","useState","authAxios","Message","UpdatePubForm","api","useParams","Redirect","UpdatePub","publication","setPub","error","setError","params","fetchData","get","pub","list","res","data","message","console","log","is_author"],"mappings":"8lBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,SAAR,KAAwB,aAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,OAAQC,GAAR,KAAkB,gBAAlB,CACA,OAAQC,SAAR,CAAmBC,QAAnB,KAAkC,kBAAlC,CAIA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,eACUP,QAAQ,EADlB,wCACbQ,WADa,eACAC,MADA,8BAEMT,QAAQ,CAAC,IAAD,CAFd,yCAEbU,KAFa,eAENC,QAFM,eAGpB,GAAMC,CAAAA,MAAM,CAAGP,SAAS,EAAxB,CAEFN,SAAS,CAAC,UAAM,SACCc,CAAAA,SADD,qIACd,iLAEwBZ,CAAAA,SAAS,CAACa,GAAV,WAAiBV,GAAG,CAACW,GAAJ,CAAQC,IAAzB,SAAgCJ,MAAM,CAAC,OAAD,CAAtC,MAFxB,QAEYK,GAFZ,eAGMR,MAAM,CAACQ,GAAG,CAACC,IAAL,CAAN,CAHN,+EAKMP,QAAQ,CAAC,YAAIQ,OAAL,CAAR,CALN,QAOEC,OAAO,CAACC,GAAR,GAPF,oEADc,4CAUdR,SAAS,GACV,CAXQ,CAWN,EAXM,CAAT,CAaA,GAAIL,WAAJ,CAAgB,CACd,GAAIA,WAAW,CAACc,SAAZ,GAA0B,KAA9B,CAAoC,CAClC,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CACF,CAGD,mBACE,+BACKZ,KAAK,eAAI,oBAAC,OAAD,EAAS,QAAQ,KAAjB,MAAoBA,KAApB,KADd,CAEKF,WAAW,eAAI,oBAAC,aAAD,EAAe,IAAI,CAAEA,WAArB,EAFpB,CADF,CAQD,CAjCD,CAkCA,cAAeD,CAAAA,SAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {authAxios} from '../services'\nimport Message from '../components/Message'\nimport UpdatePubForm from '../components/UpdatePubForm';\nimport {api} from '../helpers/api'\nimport {useParams, Redirect} from 'react-router-dom'\n\n\n\nconst UpdatePub = () => {\n    const [publication, setPub] = useState()\n    const [error, setError] = useState(null)\n    const params = useParams()\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n          const res = await authAxios.get(`${api.pub.list}${params['pubid']}/`);\n          setPub(res.data);\n      } catch (err) {\n          setError(err.message)\n      } \n      console.log()\n    }\n    fetchData();\n  }, [])\n\n  if (publication){\n    if (publication.is_author === false){\n      return <Redirect to='/'/>\n    }\n  }\n  \n\n  return(\n    <div>\n        {error && <Message negative> {error} </Message>}\n        {publication && <UpdatePubForm data={publication}/>}\n      </div>\n\n  )\n    \n}\nexport default UpdatePub;"]},"metadata":{},"sourceType":"module"}