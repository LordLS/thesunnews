{"ast":null,"code":"import _slicedToArray from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import{Button,Checkbox,Form,Header,Image}from'semantic-ui-react';import{history}from'../helpers';import{api}from'../helpers/api';import Message from'../components/Message';import MarkdownIt from'markdown-it';import MdEditor from'react-markdown-editor-lite';import{useParams}from'react-router-dom';import'react-markdown-editor-lite/lib/index.css';import{authAxios}from'../services';var mdParser=new MarkdownIt();var UpdatePubForm=function UpdatePubForm(_ref){var data=_ref.data;var _useState=useState(data.title),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(data.section),_useState4=_slicedToArray(_useState3,2),section=_useState4[0],setSection=_useState4[1];var _useState5=useState(data.content),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var currentThumb=data.thumbnail;var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),thumbnail=_useState8[0],setThumbnail=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var fileInputRef=useRef();var params=useParams();function handleFormSubmit(e){e.preventDefault();var formData=new FormData();if(thumbnail){formData.append('thumbnail',thumbnail);}formData.append('title',title);formData.append('content',content);formData.append('section',section);authAxios.put(\"\".concat(api.pub.list).concat(params['pubid'],\"/\"),formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(res){setLoading(true);history.push(\"/\".concat(section,\"/\").concat(params['pubid']));window.location.reload(false);}).catch(function(err){console.log(err);setError(err);});}function handleEditorChange(_ref2){var html=_ref2.html,text=_ref2.text;setContent(text);}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{as:\"h2\"},\"Update Publication Form\"),currentThumb&&/*#__PURE__*/React.createElement(Image,{src:currentThumb}),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'left'}},/*#__PURE__*/React.createElement(Form,{onSubmit:handleFormSubmit},/*#__PURE__*/React.createElement(Form.Field,{value:section,onChange:function onChange(e){return setSection(e.target.value);},label:\"Section\",control:\"select\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"---\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Business\"},\"Business\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Sports\"},\"Sports\"),/*#__PURE__*/React.createElement(\"option\",{value:\"World\"},\"World\")),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Title\"),/*#__PURE__*/React.createElement(\"input\",{value:title,onChange:function onChange(e){return setTitle(e.target.value);},placeholder:\"Title\"})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Content\"),/*#__PURE__*/React.createElement(MdEditor,{value:content,style:{height:\"500px\"},renderHTML:function renderHTML(text){return mdParser.render(text);},onChange:handleEditorChange})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"input\",{disabled:true,value:thumbnail.name}),/*#__PURE__*/React.createElement(Button,{type:\"button\",onClick:function onClick(){return fileInputRef.current.click();},content:\"Upload a thumbnail\",labelPosition:\"left\",icon:\"image\"}),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return setThumbnail(e.target.files[0]);},ref:fileInputRef,type:\"file\",hidden:true})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(Checkbox,{label:\"I agree to the Terms and Conditions\"})),error&&/*#__PURE__*/React.createElement(Message,{color:\"red\",message:error.message}),/*#__PURE__*/React.createElement(Button,{primary:true,loading:loading,disabled:loading,fluid:true,type:\"submit\"},\"Submit\"))));};export default UpdatePubForm;","map":{"version":3,"sources":["/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/frontend/thesunnews/src/components/UpdatePubForm.js"],"names":["React","useRef","useState","Button","Checkbox","Form","Header","Image","history","api","Message","MarkdownIt","MdEditor","useParams","authAxios","mdParser","UpdatePubForm","data","title","setTitle","section","setSection","content","setContent","currentThumb","thumbnail","setThumbnail","loading","setLoading","error","setError","fileInputRef","params","handleFormSubmit","e","preventDefault","formData","FormData","append","put","pub","list","headers","then","res","push","window","location","reload","catch","err","console","log","handleEditorChange","html","text","textAlign","target","value","height","render","name","current","click","files","message"],"mappings":"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","sourcesContent":["import React, {useRef, useState} from 'react'\nimport {\n  Button,\n  Checkbox,\n  Form,\n  Header,\n  Image,\n} from 'semantic-ui-react'\nimport {history} from '../helpers'\nimport {api} from '../helpers/api'\nimport Message from '../components/Message'\nimport MarkdownIt from 'markdown-it'\nimport MdEditor from 'react-markdown-editor-lite'\nimport {useParams} from 'react-router-dom'\nimport 'react-markdown-editor-lite/lib/index.css';\nimport {authAxios} from '../services'\n\nconst mdParser = new MarkdownIt(/* Markdown-it options */);\n\nconst UpdatePubForm = ({data}) => {\n    const [title, setTitle] = useState(data.title)\n    const [section, setSection] = useState(data.section)\n    const [content, setContent] = useState(data.content)\n    const currentThumb = data.thumbnail\n    const [thumbnail, setThumbnail] = useState('')\n    const [loading, setLoading] = useState(false)\n    const [error, setError] = useState(null)\n    \n    const fileInputRef = useRef()\n    const params = useParams()\n\n    function handleFormSubmit(e) {\n        e.preventDefault();\n        const formData = new FormData()\n        if (thumbnail) {\n            formData.append('thumbnail', thumbnail)\n        }\n        formData.append('title', title)\n        formData.append('content', content)\n        formData.append('section', section)\n        authAxios\n        .put(`${api.pub.list}${params['pubid']}/`, formData, {\n            headers: {\n                \"Content-Type\": \"multipart/form-data\"\n            }}).then(res => {\n                setLoading(true)\n                history.push(`/${section}/${params['pubid']}`)\n                window.location.reload(false)\n            }).catch(err => {\n                console.log(err)\n                setError(err)\n            })\n    }\n\n    function handleEditorChange({html, text}) { \n        setContent(text)  \n      }\n\n    return(\n        <div>\n            <Header as='h2'>Update Publication Form</Header>\n            {currentThumb && <Image src={currentThumb} />}\n            <div style={{textAlign: 'left'}}>\n                <Form onSubmit={handleFormSubmit}>\n                <Form.Field value={section} onChange={e=> setSection(e.target.value)} label='Section' control='select'>\n                    <option value=''>---</option>\n                    <option value='Business'>Business</option>\n                    <option value='Sports'>Sports</option>\n                    <option value='World'>World</option>\n                </Form.Field>\n                <Form.Field>\n                    <label>Title</label>\n                    <input value={title} onChange={e => setTitle(e.target.value)} placeholder='Title' />\n                </Form.Field>\n                <Form.Field>\n                <label>Content</label>\n                <MdEditor\n                    value={content}\n                    style={{ height: \"500px\" }}\n                    renderHTML={(text) => mdParser.render(text)}\n                    onChange={handleEditorChange}\n                        />\n                </Form.Field>\n                <Form.Field>\n                    {<input disabled value={thumbnail.name}/>}\n                    <Button type='button'onClick={() => fileInputRef.current.click()} content='Upload a thumbnail' labelPosition='left' icon='image'/>\n                    <input onChange={e => setThumbnail(e.target.files[0])}ref={fileInputRef} type='file' hidden />\n                </Form.Field>\n                <Form.Field>\n                    <Checkbox label='I agree to the Terms and Conditions' />\n                </Form.Field>\n                {error && <Message color='red' message={error.message} />}\n                <Button primary loading={loading} disabled={loading} fluid type='submit'>Submit</Button>\n                </Form>\n        </div>  \n    </div>\n    )\n}\n\nexport default UpdatePubForm\n"]},"metadata":{},"sourceType":"module"}