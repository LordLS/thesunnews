{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{authAxios,authenticationService}from'../services';import{Card,Icon}from'semantic-ui-react';import{api}from'../helpers/api';import{Redirect}from'react-router-dom';import{Message}from'semantic-ui-react';var UserProfile=function UserProfile(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authAxios.get(api.auth.profile).then(function(res){return setUser(res.data.results[0]);});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return _fetchData.apply(this,arguments);};useEffect(function(){if(authenticationService.isAuthenticated){fetchData();}},[]);if(authenticationService.isAuthenticated===false){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'left'}},/*#__PURE__*/React.createElement(\"h2\",null,\"My Profile\"),/*#__PURE__*/React.createElement(Card,null,user&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Content,null,/*#__PURE__*/React.createElement(Card.Header,null,user.email),/*#__PURE__*/React.createElement(Card.Meta,null,/*#__PURE__*/React.createElement(\"span\",{className:\"date\"},\" Status:\",user.is_reader&&/*#__PURE__*/React.createElement(React.Fragment,null,\" Reader \",/*#__PURE__*/React.createElement(Icon,{name:\"check\"}),\" \"),user.is_writer&&/*#__PURE__*/React.createElement(React.Fragment,null,\" Writer \",/*#__PURE__*/React.createElement(Icon,{name:\"check\"}),\" \"),user.is_moderator&&/*#__PURE__*/React.createElement(React.Fragment,null,\"Moderator \",/*#__PURE__*/React.createElement(Icon,{name:\"check\"}),\" \"),user.is_coordinator&&/*#__PURE__*/React.createElement(React.Fragment,null,\"Coordinator \",/*#__PURE__*/React.createElement(Icon,{name:\"check\"}),\" \")))),/*#__PURE__*/React.createElement(Card.Content,{extra:true},/*#__PURE__*/React.createElement(Icon,{name:\"user\"}),\"Active\"))),error&&/*#__PURE__*/React.createElement(Message,{negative:true},\" \",error,\" \"));};export default UserProfile;","map":{"version":3,"sources":["/Users/clintonm/Desktop/FS_PROJECT/TheSunNews/backend/thesunnews/frontend/thesunnews/src/containers/UserProfile.js"],"names":["React","useState","useEffect","authAxios","authenticationService","Card","Icon","api","Redirect","Message","UserProfile","user","setUser","error","setError","fetchData","get","auth","profile","then","res","data","results","message","isAuthenticated","textAlign","email","is_reader","is_writer","is_moderator","is_coordinator"],"mappings":"8lBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAAQC,SAAR,CAAmBC,qBAAnB,KAA+C,aAA/C,CACA,OAASC,IAAT,CAAeC,IAAf,KAA0B,mBAA1B,CACA,OAAQC,GAAR,KAAkB,gBAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAAQC,OAAR,KAAuB,mBAAvB,CAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,eACET,QAAQ,EADV,wCACfU,IADe,eACTC,OADS,8BAEIX,QAAQ,EAFZ,yCAEfY,KAFe,eAERC,QAFQ,uBAIPC,CAAAA,SAJO,qIAItB,yKAEcZ,CAAAA,SAAS,CAACa,GAAV,CAAcT,GAAG,CAACU,IAAJ,CAASC,OAAvB,EACLC,IADK,CACA,SAAAC,GAAG,QAAIR,CAAAA,OAAO,CAACQ,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,CAAjB,CAAD,CAAX,EADH,CAFd,sFAKQR,QAAQ,CAAC,YAAIS,OAAL,CAAR,CALR,mEAJsB,4CAWnB,CAELrB,SAAS,CAAC,UAAM,CACZ,GAAGE,qBAAqB,CAACoB,eAAzB,CAAyC,CACvCT,SAAS,GACV,CACJ,CAJQ,CAIN,EAJM,CAAT,CAMA,GAAIX,qBAAqB,CAACoB,eAAtB,GAA0C,KAA9C,CAAqD,CACnD,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CACC,mBACE,2BAAK,KAAK,CAAE,CAACC,SAAS,CAAE,MAAZ,CAAZ,eACI,2CADJ,cAEI,oBAAC,IAAD,MACKd,IAAI,eACL,qDACA,oBAAC,IAAD,CAAM,OAAN,mBACA,oBAAC,IAAD,CAAM,MAAN,MAAcA,IAAI,CAACe,KAAnB,CADA,cAEA,oBAAC,IAAD,CAAM,IAAN,mBACI,4BAAM,SAAS,CAAC,MAAhB,aACKf,IAAI,CAACgB,SAAL,eACG,gEAAU,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EAAV,KAFR,CAIKhB,IAAI,CAACiB,SAAL,eACG,gEAAU,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EAAV,KALR,CAMKjB,IAAI,CAACkB,YAAL,eACG,kEAAY,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EAAZ,KAPR,CASKlB,IAAI,CAACmB,cAAL,eACG,oEAAc,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EAAd,KAVR,CADJ,CAFA,CADA,cAmBY,oBAAC,IAAD,CAAM,OAAN,EAAc,KAAK,KAAnB,eACR,oBAAC,IAAD,EAAM,IAAI,CAAC,MAAX,EADQ,UAnBZ,CAFJ,CAFJ,CA+BDjB,KAAK,eAAI,oBAAC,OAAD,EAAS,QAAQ,KAAjB,MAAoBA,KAApB,KA/BR,CADF,CAmCD,CAzDD,CA2DA,cAAeH,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {authAxios, authenticationService} from '../services'\nimport { Card, Icon} from 'semantic-ui-react'\nimport {api} from '../helpers/api'\nimport { Redirect } from 'react-router-dom'\nimport {Message } from 'semantic-ui-react'\n\n\nconst UserProfile = () => {\n    const [user, setUser] = useState()\n    const [error, setError] = useState()\n\n    async function fetchData() {\n        try {\n            await authAxios.get(api.auth.profile)\n            .then(res => setUser(res.data.results[0]))\n        } catch (err) {\n            setError(err.message)\n        } \n      };\n    \n  useEffect(() => {\n      if(authenticationService.isAuthenticated){\n        fetchData();\n      }\n  }, [])\n\n  if (authenticationService.isAuthenticated === false) {\n    return <Redirect to='/'/>\n}\n  return (\n    <div style={{textAlign: 'left'}}>\n        <h2>My Profile</h2>\n        <Card>\n            {user && \n            <>\n            <Card.Content>\n            <Card.Header>{user.email}</Card.Header>\n            <Card.Meta>\n                <span className='date'> Status:\n                    {user.is_reader && (\n                        <> Reader <Icon name='check' /> </>\n                    )}\n                    {user.is_writer && (\n                        <> Writer <Icon name='check' /> </>)}\n                    {user.is_moderator && (\n                        <>Moderator <Icon name='check' /> </>\n                    )}\n                    {user.is_coordinator && (\n                        <>Coordinator <Icon name='check' /> </>\n                    )}\n                </span>\n                    </Card.Meta>\n                     </Card.Content>\n                        <Card.Content extra>\n                <Icon name='user' />\n                Active\n            </Card.Content>\n            </>\n        }\n  </Card>\n\n  {error && <Message negative> {error} </Message>}\n  </div>\n  )\n}\n\nexport default UserProfile"]},"metadata":{},"sourceType":"module"}